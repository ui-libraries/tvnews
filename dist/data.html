<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>The Evolution of Political Campaign Advertisements</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
		<!-- favicon
		============================================ -->		
        <link rel="shortcut icon" type="image/x-icon" href="">
		
		<!-- Google Fonts
		============================================ -->		
        <link href='https://fonts.googleapis.com/css?family=Poppins:400,300,500,600,700' rel='stylesheet' type='text/css'>
	   
		<!-- Style CSS
		============================================ -->
        <link rel="stylesheet" href="style.css">
        
		<!-- Modernizr JS
		============================================ -->		
        <script src="js/vendor/modernizr-2.8.3.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        
        <!--Header Area Start-->
        <header> 
            <!--Logo Mainmenu Start-->
            <div class="header-logo-menu sticker">
                <div class="container">
                    <div class="logo-menu-bg">
                        <div class="row">
                            <div class="col-lg-3 col-md-12">
                                <div class="logo">
                                    <a href="index.html"><img src="img/logo/logo.png" alt=""></a>
                                </div>
                            </div>
                            <div class="col-lg-9 d-none d-lg-block">
                                <div class="mainmenu-area">
                                    <div class="mainmenu">
                                        <nav>
                                            <ul id="nav">
                                                <li><a href="index.html">Home</a></li>
                                                <li><a href="about.html">About</a></li>
                                                <li><a href="people.html">People</a></li>
                                                <li class="current"><a href="data.html">Data</a></li>
                                                <li><a href="sponsors.html">Sponsors</li>
                                                <li><a href="contact.html">Contact</a></li>
                                            </ul>
                                        </nav>
                                    </div>
                                    <ul class="header-search">
                                        <li class="search-menu">
                                            <i id="toggle-search" class="fa fa-search"></i>
                                        </li>
                                    </ul>
                                    <!--Search Form-->
                                    <div class="search">
                                        <div class="search-form">
                                            <form id="search-form" action="#">
                                                <input type="search" placeholder="Search here..." name="search" />
                                                <button type="submit">
                                                    <span><i class="fa fa-search"></i></span>
                                                </button>
                                            </form>                                
                                        </div>
                                    </div>
                                    <!--End of Search Form-->
                                </div>    
                            </div>
                        </div>
                    </div>
                </div>
            </div>  
            <!--End of Logo Mainmenu-->
            <!-- Mobile Menu Area start -->
            <div class="mobile-menu-area">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="mobile-menu">
                                <nav id="dropdown">
                                    <ul>
                                        <li><a href="index.html">Home</a></li>
                                        <li><a href="about.html">About</a></li>
                                        <li><a href="people.html">People</a></li>
                                        <li><a href="data.html">Data</a></li>
                                        <li><a href="sponsors.html">Sponsors</li>
                                        <li><a href="contact.html">Contact</a></li>
                                    </ul>
                                </nav>
                            </div>					
                        </div>
                    </div>
                </div>
            </div>
            <!-- Mobile Menu Area end -->  
        </header>
        <!--End of Header Area-->
        <!--Breadcrumb Banner Area Start-->
        <div class="breadcrumb-banner-area">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="breadcrumb-text">
                            <h1 class="text-center">The Evolution of Political Campaign Advertisements</h1>
                            <div class="breadcrumb-bar">
                                <ul class="breadcrumb">
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--End of Breadcrumb Banner Area-->
        <!--Class Details Area Start-->
        <div class="class-details-area section-padding-top">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <h2>Search Political Campaign Videos</h2>
                        <input type="text" id="searchInput" placeholder="Enter search terms..." class="form-control">
                        <button id="searchButton" class="btn btn-primary">Search</button> <!-- Search Button -->
                        <div id="results" class="search-results"></div>
                    </div>
                </div>
            </div>
        </div>
        
        
        <!--Footer Area Start-->
        <div class="footer-area">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="footer-info-container text-center section-padding">
                            <div class="footer-logo">
                                <a href="#"><img src="img/logo/logo-white.png" alt=""></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--End of Footer Area-->
        
        
		<!-- jquery
		============================================ -->		
       <script src="js/vendor/jquery-1.12.4.min.js"></script>
        
        <!-- Popper JS
		============================================ -->		
        <script src="js/popper.js"></script>
        
		<!-- bootstrap JS
		============================================ -->		
        <script src="js/bootstrap.min.js"></script>
        
		<!-- bootstrap Toggle JS
		============================================ -->		
        <script src="js/bootstrap-toggle.min.js"></script>
        
        <!-- nivo slider js
		============================================ -->       
		<script src="lib/nivo-slider/js/jquery.nivo.slider.js"></script>
		<script src="lib/nivo-slider/home.js"></script>
		
		<!-- wow JS
		============================================ -->		
        <script src="js/wow.min.js"></script>
        
		<!-- meanmenu JS
		============================================ -->		
        <script src="js/jquery.meanmenu.js"></script>
        
		<!-- Owl carousel JS
		============================================ -->		
        <script src="js/owl.carousel.min.js"></script>
        
		<!-- Countdown JS
		============================================ -->		
        <script src="js/jquery.countdown.min.js"></script>
        
		<!-- scrollUp JS
		============================================ -->		
        <script src="js/jquery.scrollUp.min.js"></script>
        
		<!-- Waypoints JS
		============================================ -->		
        <script src="js/waypoints.min.js"></script>
        
		<!-- Counterup JS
		============================================ -->		
        <script src="js/jquery.counterup.min.js"></script>
        
		<!-- Slick JS
		============================================ -->		
        <script src="js/slick.min.js"></script>
        
		<!-- Mix It Up JS
		============================================ -->		
        <script src="js/jquery.mixitup.js"></script>
        
		<!-- Venubox JS
		============================================ -->		
        <script src="js/venobox.min.js"></script>
        
		<!-- plugins JS
		============================================ -->		
        <script src="js/plugins.js"></script>	
        
		<!-- main JS
		============================================ -->		
        <script src="js/main.js"></script>

        <!-- bundle JS
		============================================ -->		
        <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.js"></script>
        
        <script>
let originalData // Global variable to store original data
let fuse

// Load the data asynchronously
async function loadData() {
    const response = await fetch('trimmed_videos.json') // Ensure path is correct
    const data = await response.json()
    originalData = data // Store the original data for exact matching
    return data
}

// Fuse.js options with lower threshold for stricter matches
const options = {
    keys: ['TITLE', 'SUMMARY', 'whisper_largev3'], // Fields to search in
    threshold: 0.4, // Lower threshold for stricter matching
    includeScore: true // Include scores for sorting results
}

// Initialize Fuse.js and create the search index
async function initializeSearch() {
    const data = await loadData()
    fuse = new Fuse(data, options) // Create Fuse index with data
}

// Perform exact match check before fuzzy search
document.getElementById('searchButton').addEventListener('click', async () => {
    const query = document.getElementById('searchInput').value.toLowerCase()
    if (!fuse) await initializeSearch() // Ensure the search index is loaded

    // Check for exact match in the original data
    const exactResults = originalData.filter(item => {
        const title = typeof item.TITLE === 'string' ? item.TITLE.toLowerCase() : ''
        const summary = typeof item.SUMMARY === 'string' ? item.SUMMARY.toLowerCase() : ''
        const transcript = typeof item.whisper_largev3 === 'string' ? item.whisper_largev3.toLowerCase() : ''

        return title.includes(query) || summary.includes(query) || transcript.includes(query)
    })

    // If exact matches found, show them
    if (exactResults.length > 0) {
        displayResults(exactResults.map(item => ({ item, score: 0 })))
    } else {
        // Otherwise, perform fuzzy search
        const fuzzyResults = fuse.search(query)
        displayResults(fuzzyResults)
    }
})

// Display search results dynamically
function displayResults(results) {
    const resultsContainer = document.getElementById('results')
    resultsContainer.innerHTML = '' // Clear previous results

    if (results.length === 0) {
        resultsContainer.innerHTML = '<p>No matches found</p>'
        return
    }

    results.forEach(result => {
        const video = result.item // Extract the video data from result
        const resultElement = document.createElement('div')
        resultElement.classList.add('result-item')
        resultElement.innerHTML = `
            <h3>${video.TITLE || 'Untitled Video'}</h3>
            <p><strong>Election Year:</strong> ${video.ELECTION_YEAR || 'Unknown'}</p>
            <p><strong>Party:</strong> ${video.PARTY || 'Unknown'}</p>
            <p><strong>Name:</strong> ${video.FIRST_NAME || ''} ${video.LAST_NAME || ''}</p>
            <p>${video.SUMMARY || 'No summary available'}</p>
            <p><strong>Transcript Excerpt:</strong> ${video.whisper_largev3.slice(0, 100)}...</p> <!-- Show only part of the transcript -->
        `
        resultsContainer.appendChild(resultElement)
    })
}

// Initialize the search index on page load
initializeSearch()


        </script>
    </body>
</html>